<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maui Admin | Panel de Control</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="css/admin.css">
</head>

<body>

    <div id="login-screen">
        <div class="login-card">
            <div class="login-logo">‚úàÔ∏è</div>
            <h2>Maui Viajes</h2>
            <p>Acceso Administrativo</p>
            <form onsubmit="event.preventDefault(); login();">
                <input type="text" id="user" class="login-input" placeholder="Usuario" autocomplete="off" required>
                <input type="password" id="pass" class="login-input" placeholder="Contrase√±a" required>
                <button type="submit" class="btn btn-primary">INGRESAR <i class="fa-solid fa-arrow-right"></i></button>
            </form>
            <p id="login-error" class="error-msg"></p>
        </div>
    </div>

    <div id="admin-panel" style="display: none;">

        <header class="top-bar">
            <div class="brand">
                <i class="fa-solid fa-plane-departure icon-gold"></i>
                <h1>Panel de Control</h1>
            </div>

            <nav class="admin-nav">
                <button class="nav-btn active" onclick="cambiarPestana('paquetes')">
                    <i class="fa-solid fa-suitcase"></i> Gesti√≥n
                </button>
                <button class="nav-btn" onclick="cambiarPestana('solicitudes')">
                    <i class="fa-solid fa-envelope-open-text"></i> Solicitudes
                </button>
                <button class="nav-btn" onclick="cambiarPestana('newsletter')">
                    <i class="fa-solid fa-at"></i> Newsletter
                </button>
                <button class="nav-btn" id="nav-reclamos" onclick="cambiarPestana('reclamos')">
                    <i class="fa-solid fa-book-open"></i> Reclamos
                </button>
                <button class="nav-btn" id="nav-papelera" onclick="cambiarPestana('papelera')">
                    <i class="fa-solid fa-trash-can"></i> Papelera
                </button>
                <button class="nav-btn" id="nav-clientes" onclick="cambiarPestana('clientes')">
                    <i class="fa-solid fa-user-group"></i> Clientes
                </button>
                <button class="nav-btn" id="nav-dashboard" onclick="cambiarPestana('dashboard')">
                    <i class="fa-solid fa-chart-line"></i> Dashboard
                </button>
                <button class="nav-btn" id="nav-accesos" onclick="cambiarPestana('accesos')" style="display:none;">
                    <i class="fa-solid fa-satellite-dish"></i> Accesos
                </button>
            </nav>

            <div class="user-profile">
                <div class="welcome-msg">
                    <span id="role-display">Rol: ...</span>
                    <strong id="admin-name-display">Usuario</strong>
                </div>
                <div class="avatar" id="avatar-initial">U</div>
                <button class="btn btn-logout" onclick="logout()" title="Cerrar Sesi√≥n">
                    <i class="fa-solid fa-right-from-bracket"></i>
                </button>
            </div>
        </header>

        <div id="tab-paquetes" class="tab-content active dashboard-grid">

            <div class="card" id="card-crear-paquete">
                <div class="card-header">
                    <h2><i class="fa-solid fa-plus-circle icon-gold"></i> Publicar Servicio</h2>
                </div>

                <form id="tour-form">
                    <div class="type-selector-box">
                        <label>üè∑Ô∏è Tipo de Servicio</label>
                        <select name="tipo" id="tipo-servicio" onchange="actualizarEstiloTipo(this.value)">
                            <option value="paquete">üì¶ Paquete Tur√≠stico</option>
                            <option value="crucero">üö¢ Crucero</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div><label>T√≠tulo</label><input type="text" name="titulo" required
                                placeholder="Ej: Punta Cana 2026"></div>
                        <div><label>Subt√≠tulo</label><input type="text" name="subtitulo"
                                placeholder="Ej: Todo incluido 5 d√≠as"></div>
                    </div>

                    <div class="form-row">
                        <div><label>Ubicaci√≥n</label><input type="text" name="ubicacion" required
                                placeholder="Pa√≠s o Ciudad"></div>
                        <div>
                            <label>Categor√≠a</label>
                            <select name="categoria">
                                <option value="internacional">üåé Internacional</option>
                                <option value="nacional">üáµüá™ Nacional</option>
                                <option value="fullday">‚òÄÔ∏è Full Day</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div><label>Precio</label><input type="number" name="precio" required placeholder="0.00"
                                step="0.01"></div>
                        <div>
                            <label>Moneda</label>
                            <select name="moneda">
                                <option value="USD">D√≥lares ($)</option>
                                <option value="SOL">Soles (S/)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div><label>Duraci√≥n</label><input type="text" name="duracion" required placeholder="Ej: 4D/3N">
                        </div>
                        <div><label>Vigencia</label><input type="text" name="vigencia"
                                placeholder="Ej: Hasta agotar stock"></div>
                    </div>

                    <div class="form-group">
                        <label>Etiquetas (Filtros):</label>
                        <div class="checkbox-container">

                            <input type="checkbox" id="chk-familiar" name="intereses" value="familiar"><label
                                for="chk-familiar">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familiar</label>
                            <input type="checkbox" id="chk-pareja" name="intereses" value="pareja"><label
                                for="chk-pareja">üíç Pareja</label>
                            <input type="checkbox" id="chk-playa" name="intereses" value="playa"><label
                                for="chk-playa">üèñÔ∏è Playa</label>

                            <span class="filter-group group-paquete">
                                <input type="checkbox" id="chk-aventura" name="intereses" value="aventura"><label
                                    for="chk-aventura">üßó Aventura</label>
                                <input type="checkbox" id="chk-historia" name="intereses" value="historia"><label
                                    for="chk-historia">üèõÔ∏è Historia</label>
                                <input type="checkbox" id="chk-relax" name="intereses" value="relax"><label
                                    for="chk-relax">üßñ Relax</label>
                            </span>

                            <span class="filter-group group-crucero" style="display:none;">
                                <strong style="font-size:0.8rem; color:#555; display:block; margin-bottom:5px;">üìç
                                    Destino:</strong>
                                <input type="checkbox" id="chk-caribe" name="intereses" value="caribe"><label
                                    for="chk-caribe">‚òÄÔ∏è Caribe</label>
                                <input type="checkbox" id="chk-mediterraneo" name="intereses"
                                    value="mediterraneo"><label for="chk-mediterraneo">üèõÔ∏è Mediterr√°neo</label>
                                <input type="checkbox" id="chk-disney" name="intereses" value="disney"><label
                                    for="chk-disney">üè∞ Disney</label>
                                <input type="checkbox" id="chk-sudamerica" name="intereses" value="sudamerica"><label
                                    for="chk-sudamerica">üó∫Ô∏è Sudam√©rica</label>
                                <strong style="font-size:0.8rem; color:#555; display:block; margin: 8px 0 5px;">üéØ
                                    Experiencia:</strong>
                                <input type="checkbox" id="chk-casino" name="intereses" value="casino"><label
                                    for="chk-casino">üé∞ Casino</label>
                                <input type="checkbox" id="chk-bordo" name="intereses" value="entretenimiento"><label
                                    for="chk-bordo">üé≠ Shows a Bordo</label>
                                <input type="checkbox" id="chk-vista" name="intereses" value="vista_mar"><label
                                    for="chk-vista">üåä Vista al Mar</label>
                                <input type="checkbox" id="chk-all" name="intereses" value="all_inclusive"><label
                                    for="chk-all">üçπ All Inclusive</label>
                            </span>

                        </div>
                    </div>

                    <div class="form-group">
                        <label>¬øQu√© incluye? (Resumen)</label>
                        <textarea name="incluye" rows="3" placeholder="‚Ä¢ Vuelos&#10;‚Ä¢ Hotel"></textarea>
                    </div>

                    <div class="form-group">
                        <label>üìù Itinerario Detallado</label>
                        <textarea name="descripcion" rows="5" placeholder="D√≠a 1: Llegada..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Fotos</label>
                        <div class="photo-upload" onclick="document.getElementById('file-input').click()">
                            <i class="fa-solid fa-cloud-arrow-up"></i>
                            <p>Clic para subir fotos</p>
                            <input type="file" id="file-input" name="fotos" multiple accept="image/*"
                                style="display:none" onchange="previewImages(this)">
                        </div>
                        <div class="gallery-preview" id="gallery"></div>
                    </div>

                    <div class="form-group">
                        <label class="promo-check">
                            <input type="checkbox" name="is_promo">
                            <span>üî• Oferta Destacada (Inicio)</span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary" id="btn-submit">PUBLICAR</button>
                    <p id="loader" style="display:none; text-align:center; color: #c5a059; margin-top:10px;"><i
                            class="fa-solid fa-spinner fa-spin"></i> Comprimiendo y subiendo...</p>
                </form>
            </div>

            <div class="card full-height">
                <div class="card-header">
                    <h2><i class="fa-solid fa-list-check"></i> Paquetes Activos</h2>
                    <button class="btn btn-refresh" onclick="cargarPaquetes()" title="Actualizar"><i
                            class="fa-solid fa-sync"></i></button>
                </div>
                <div id="lista-paquetes" class="package-list">
                    <div class="loading-state">Cargando...</div>
                </div>
            </div>
        </div>

        <div id="tab-solicitudes" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-users-viewfinder"></i> Clientes Interesados</h2>
                    <button class="btn btn-refresh" onclick="cargarSolicitudes()"><i
                            class="fa-solid fa-sync"></i></button>
                </div>

                <div class="table-container">
                    <table class="crm-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Inter√©s</th>
                                <th>Estado</th>
                                <th>Contacto</th>
                                <th>Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="lista-solicitudes">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-newsletter" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-at icon-gold"></i> Suscriptores Newsletter</h2>
                    <button class="btn btn-refresh" onclick="cargarNewsletter()"><i
                            class="fa-solid fa-sync"></i></button>
                </div>
                <div class="table-container">
                    <table class="crm-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Email</th>
                                <th>Estado</th>
                                <th>Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="lista-newsletter"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-reclamos" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-book-open icon-gold"></i> Libro de Reclamaciones</h2>
                    <button class="btn btn-refresh" onclick="cargarReclamos()"><i class="fa-solid fa-sync"></i></button>
                </div>
                <div class="table-container">
                    <table class="crm-table">
                        <thead>
                            <tr>
                                <th>C√≥digo</th>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Tipo</th>
                                <th>Detalle</th>
                                <th>Estado</th>
                                <th>Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="lista-reclamos"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-papelera" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-trash-can icon-gold"></i> Papelera de Reciclaje</h2>
                    <button class="btn btn-refresh" onclick="cargarPapelera()"><i class="fa-solid fa-sync"></i></button>
                </div>
                <div id="lista-papelera" class="package-list"></div>
            </div>
        </div>

        <div id="tab-clientes" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-user-group icon-gold"></i> Base de Clientes</h2>
                    <button class="btn btn-refresh" onclick="cargarClientes()"><i class="fa-solid fa-sync"></i></button>
                </div>
                <div class="table-container">
                    <table class="crm-table">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Contacto</th>
                                <th>Intereses</th>
                                <th>Consultas</th>
                                <th>√öltima Consulta</th>
                            </tr>
                        </thead>
                        <tbody id="lista-clientes"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-dashboard" class="tab-content">
            <div class="section-header">
                <h2>üìä Dashboard</h2>
                <button class="btn btn-refresh" onclick="cargarDashboard()"><i class="fa-solid fa-sync"></i></button>
            </div>
            <div id="dashboard-content">
                <p style="text-align:center; padding:40px; color:#94a3b8;">Cargando m√©tricas...</p>
            </div>
        </div>

        <div id="tab-accesos" class="tab-content">
            <div class="section-header">
                <h2>üì° Registro de Accesos</h2>
                <button class="btn btn-refresh" onclick="cargarAccesos()"><i class="fa-solid fa-sync"></i></button>
            </div>
            <div id="accesos-stats" style="margin-bottom:16px;"></div>
            <div class="table-container">
                <table class="crm-table">
                    <thead>
                        <tr>
                            <th>IP</th>
                            <th>üåç Pa√≠s</th>
                            <th>üèôÔ∏è Ciudad</th>
                            <th>üì± Dispositivo</th>
                            <th>üìÑ Ruta</th>
                            <th>üìÖ Fecha</th>
                        </tr>
                    </thead>
                    <tbody id="lista-accesos"></tbody>
                </table>
            </div>
        </div>

    </div>

    <script src="js/admin.js"></script>
</body>

</html>