<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maui Admin | Panel de Control</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <div class="login-logo">âœˆï¸</div>
            <h2>Maui Viajes</h2>
            <p>Acceso Administrativo</p>
            <form onsubmit="event.preventDefault(); login();">
                <input type="text" id="user" class="login-input" placeholder="Usuario" autocomplete="off" required>
                <input type="password" id="pass" class="login-input" placeholder="ContraseÃ±a" required>
                <button type="submit" class="btn btn-primary">INGRESAR <i class="fa-solid fa-arrow-right"></i></button>
            </form>
            <p id="login-error" class="error-msg"></p>
        </div>
    </div>

    <div id="admin-panel" style="display: none;">
        
        <header class="top-bar">
            <div class="brand">
                <i class="fa-solid fa-plane-departure icon-gold"></i>
                <h1>Panel de Control</h1>
            </div>

            <nav class="admin-nav">
                <button class="nav-btn active" onclick="cambiarPestana('paquetes')">
                    <i class="fa-solid fa-suitcase"></i> GestiÃ³n
                </button>
                <button class="nav-btn" onclick="cambiarPestana('solicitudes')">
                    <i class="fa-solid fa-envelope-open-text"></i> Solicitudes
                </button>
            </nav>

            <div class="user-profile">
                <div class="welcome-msg">
                    <span id="role-display">Rol: ...</span>
                    <strong id="admin-name-display">Usuario</strong>
                </div>
                <div class="avatar" id="avatar-initial">U</div>
                <button class="btn btn-logout" onclick="logout()" title="Cerrar SesiÃ³n">
                    <i class="fa-solid fa-right-from-bracket"></i>
                </button>
            </div>
        </header>

        <div id="tab-paquetes" class="tab-content active dashboard-grid">
            
            <div class="card" id="card-crear-paquete">
                <div class="card-header">
                    <h2><i class="fa-solid fa-plus-circle icon-gold"></i> Publicar Servicio</h2>
                </div>

                <form id="tour-form">
                    <div class="type-selector-box">
                        <label>ğŸ·ï¸ Tipo de Servicio</label>
                        <select name="tipo" id="tipo-servicio" onchange="actualizarEstiloTipo(this.value)">
                            <option value="paquete">ğŸ“¦ Paquete TurÃ­stico</option>
                            <option value="crucero">ğŸš¢ Crucero</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div><label>TÃ­tulo</label><input type="text" name="titulo" required placeholder="Ej: Punta Cana 2026"></div>
                        <div><label>SubtÃ­tulo</label><input type="text" name="subtitulo" placeholder="Ej: Todo incluido 5 dÃ­as"></div>
                    </div>
                    
                    <div class="form-row">
                        <div><label>UbicaciÃ³n</label><input type="text" name="ubicacion" required placeholder="PaÃ­s o Ciudad"></div>
                        <div>
                            <label>CategorÃ­a</label>
                            <select name="categoria">
                                <option value="internacional">ğŸŒ Internacional</option>
                                <option value="nacional">ğŸ‡µğŸ‡ª Nacional</option>
                                <option value="fullday">â˜€ï¸ Full Day</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div><label>Precio</label><input type="number" name="precio" required placeholder="0.00" step="0.01"></div>
                        <div>
                            <label>Moneda</label>
                            <select name="moneda">
                                <option value="USD">DÃ³lares ($)</option>
                                <option value="SOL">Soles (S/)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div><label>DuraciÃ³n</label><input type="text" name="duracion" required placeholder="Ej: 4D/3N"></div>
                        <div><label>Vigencia</label><input type="text" name="vigencia" placeholder="Ej: Hasta agotar stock"></div>
                    </div>

                    <div class="form-group">
                        <label>Etiquetas (Filtros):</label>
                        <div class="checkbox-container">
                            
                            <input type="checkbox" id="chk-familiar" name="intereses" value="familiar"><label for="chk-familiar">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Familiar</label>
                            <input type="checkbox" id="chk-pareja" name="intereses" value="pareja"><label for="chk-pareja">ğŸ’ Pareja</label>
                            <input type="checkbox" id="chk-playa" name="intereses" value="playa"><label for="chk-playa">ğŸ–ï¸ Playa</label>

                            <span class="filter-group group-paquete">
                                <input type="checkbox" id="chk-aventura" name="intereses" value="aventura"><label for="chk-aventura">ğŸ§— Aventura</label>
                                <input type="checkbox" id="chk-historia" name="intereses" value="historia"><label for="chk-historia">ğŸ›ï¸ Historia</label>
                                <input type="checkbox" id="chk-disney" name="intereses" value="disney"><label for="chk-disney">ğŸ° Disney</label>
                            </span>

                            <span class="filter-group group-crucero" style="display:none;">
                                <input type="checkbox" id="chk-casino" name="intereses" value="casino"><label for="chk-casino">ğŸ° Casino</label>
                                <input type="checkbox" id="chk-bordo" name="intereses" value="entretenimiento"><label for="chk-bordo">ğŸ­ Shows a Bordo</label>
                                <input type="checkbox" id="chk-vista" name="intereses" value="vista_mar"><label for="chk-vista">ğŸŒŠ Vista al Mar</label>
                                <input type="checkbox" id="chk-all" name="intereses" value="all_inclusive"><label for="chk-all">ğŸ¹ All Inclusive</label>
                            </span>

                        </div>
                    </div>

                    <div class="form-group">
                        <label>Â¿QuÃ© incluye? (Resumen)</label>
                        <textarea name="incluye" rows="3" placeholder="â€¢ Vuelos&#10;â€¢ Hotel"></textarea>
                    </div>

                    <div class="form-group">
                        <label>ğŸ“ Itinerario Detallado</label>
                        <textarea name="descripcion" rows="5" placeholder="DÃ­a 1: Llegada..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Fotos</label>
                        <div class="photo-upload" onclick="document.getElementById('file-input').click()">
                            <i class="fa-solid fa-cloud-arrow-up"></i>
                            <p>Clic para subir fotos</p>
                            <input type="file" id="file-input" name="fotos" multiple accept="image/*" style="display:none" onchange="previewImages(this)">
                        </div>
                        <div class="gallery-preview" id="gallery"></div>
                    </div>

                    <div class="form-group">
                        <label class="promo-check">
                            <input type="checkbox" name="is_promo">
                            <span>ğŸ”¥ Oferta Destacada (Inicio)</span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary" id="btn-submit">PUBLICAR</button>
                    <p id="loader" style="display:none; text-align:center; color: #c5a059; margin-top:10px;"><i class="fa-solid fa-spinner fa-spin"></i> Comprimiendo y subiendo...</p>
                </form>
            </div>

            <div class="card full-height">
                <div class="card-header">
                    <h2><i class="fa-solid fa-list-check"></i> Paquetes Activos</h2>
                    <button class="btn btn-refresh" onclick="cargarPaquetes()" title="Actualizar"><i class="fa-solid fa-sync"></i></button>
                </div>
                <div id="lista-paquetes" class="package-list">
                    <div class="loading-state">Cargando...</div>
                </div>
            </div>
        </div>

        <div id="tab-solicitudes" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2><i class="fa-solid fa-users-viewfinder"></i> Clientes Interesados</h2>
                    <button class="btn btn-refresh" onclick="cargarSolicitudes()"><i class="fa-solid fa-sync"></i></button>
                </div>
                
                <div class="table-container">
                    <table class="crm-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>InterÃ©s</th>
                                <th>Contacto</th>
                                <th>AcciÃ³n</th>
                            </tr>
                        </thead>
                        <tbody id="lista-solicitudes">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script src="js/admin.js"></script>
</body>
</html>